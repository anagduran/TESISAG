html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible", content="ie=edge")
        link(rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous")
        link(rel="stylesheet", type= "text/css", href="../public/css/style.css")
        link(rel="stylesheet" href="../public/css/bootstrap.css")
        script(type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js") 
        script(type="text/javascript" src='../public/js/bootstrap.js')
        script(type="text/javascript" src='../public/js/bootstrap.min.js')
        
        title ALL CATEGORIES
    include ../menuLateral.jade

    

    div(class='container')
        div(class='row')
            div(class='col-md-3 offset-2 row-style')
                h2(class='h1All') Categorias

    - if(message)
        li #{message}
    

 
    div(class='estilo-divtable col-md-6 offset-3 table-responsive')        
        table(id='tablaUno' class='tableAll table table-striped table-sm table-bordered')
            thead
                tr.head
                    th #
                    th(id='thDos' class='thAll') Nombre Categoria 
                    th(class='thAll') Descripcion Categoria
                    th(class='thAll') Acciones
            
            tbody
                -var i= -1
                each categoria in categorias  
                    - ++i   
                    tr(class=(i % 2 == 0) ? 'odd' : 'even')
                        td(id='tdUno') #{i}
                        td(id='tdDos') #{categoria.name} 
                        td(id='tdTres') #{categoria.description}
                        td 
                            a(class='action-icon' href='/category/#{categoria._id}') 
                                i(id='icon-see' class='fa fa-eye')
                            a(class='action-icon' href='/category/edit/#{categoria._id}') 
                                i(id='icon-edit' class='fas fa-pencil-alt')
                            button(type='button' id='button1' class='fas fa-trash-alt' data-toggle="modal" data-target="#myModal2" value= categoria._id onclick='obtenervalor(`#{categoria._id}`);')                            
                           
                            
                            
    div(class="modal fade" id="myModal2" tabindex="-1" role="dialog")
        div(class="modal-dialog" role='document')
            div(class="modal-content")
                div(class='modal-header')
                    h5 Eliminar Categoria   
                    input(type='text' id='lista' style="visibility:hidden")                                        
                div(class="modal-body")
                    ¿Estas seguro que desea eliminar este registro?
                div(class="modal-footer")
                    button(type="button" class="btn btn-default" id="closeModal" data-dismiss='modal') Close
                    form(action="" class= "link" method="POST" id='formEliminar')
                    a(class="btn btn-success" href='#' name='POST' onclick='enviar();') Aceptar
                        
             
                                
                                
                                
                                
                               
                        
    div(class='row')
        div(class='col-sm-4 offset-3')        
            a(href='/' class='back-style pl-3 pr-3 btn btn-outline-info' role="button")  Back 
            
        div(class='col-sm-4 col-sm-offset-6')
            a(href='/category/create' class='btn btn-outline-success' role='button') Nueva Categoria

       

    footer(class='page-footer font-small blue')
        div(class="footer-copyright text-center pr-3")© 2018 Copyright. 
       
    
    
    
script(type="text/javascript").

    function obtenervalor(id) {
        $('#lista').val(id);       
    }

    function enviar(){       
        var id = document.getElementById('lista').value;            
        var action = '/category/delete/' 
        var action2 = '?_method=DELETE'
        var total = action.concat(id,action2);        
        document.getElementById("formEliminar").action = total;
        document.getElementById("formEliminar").submit();        
    
    }
    
     
    


